module.exports=[93695,(e,r,t)=>{r.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70406,(e,r,t)=>{r.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},18622,(e,r,t)=>{r.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},60187,e=>{"use strict";var r=e.i(91180);function t(e,t){e.cookies.set({name:(0,r.getSessionCookieName)(),value:t,httpOnly:!0,secure:!0,sameSite:"lax",path:"/",maxAge:(0,r.getSessionMaxAge)()})}function s(e){e.cookies.set({name:(0,r.getSessionCookieName)(),value:"",httpOnly:!0,secure:!0,sameSite:"lax",path:"/",maxAge:0})}e.s(["clearSessionCookie",()=>s,"setSessionCookie",()=>t])},66680,(e,r,t)=>{r.exports=e.x("node:crypto",()=>require("node:crypto"))},2157,(e,r,t)=>{r.exports=e.x("node:fs",()=>require("node:fs"))},50227,(e,r,t)=>{r.exports=e.x("node:path",()=>require("node:path"))},12057,(e,r,t)=>{r.exports=e.x("node:util",()=>require("node:util"))},76661,e=>{"use strict";var r=e.i(66680),t=e.i(2157),s=e.i(50227);let a=(0,e.i(12057).promisify)(r.scrypt),i=(0,s.join)(process.cwd(),"uploads"),n=(0,s.join)(i,"local-users.json");async function o(){await t.promises.mkdir(i,{recursive:!0});try{await t.promises.access(n)}catch{await t.promises.writeFile(n,JSON.stringify({users:[]},null,2),"utf8")}}async function l(){await o();let e=await t.promises.readFile(n,"utf8");try{let r=JSON.parse(e);if(!r||!Array.isArray(r.users))return{users:[]};return{users:r.users.filter(e=>"string"==typeof e?.email&&"string"==typeof e?.passwordHash&&"string"==typeof e?.salt)}}catch{return{users:[]}}}async function u(e){await o(),await t.promises.writeFile(n,JSON.stringify(e,null,2),"utf8")}async function p(e,r){return(await a(e,r,64)).toString("hex")}async function c(){return(await l()).users.map(e=>e.email).sort((e,r)=>e.localeCompare(r))}async function x(e,t){let s=e.trim().toLowerCase(),a=(0,r.randomBytes)(16).toString("hex"),i=await p(t,a),n=(await l()).users.filter(e=>e.email!==s);n.push({email:s,passwordHash:i,salt:a}),await u({users:n})}async function d(e){let r=e.trim().toLowerCase(),t=await l(),s=t.users.filter(e=>e.email!==r);return s.length!==t.users.length&&(await u({users:s}),!0)}async function m(e,t){let s=e.trim().toLowerCase(),a=(await l()).users.find(e=>e.email===s);if(!a)return!1;let i=await p(t,a.salt),n=Buffer.from(a.passwordHash,"hex"),o=Buffer.from(i,"hex");return n.length===o.length&&(0,r.timingSafeEqual)(n,o)}e.s(["listStoredLocalUserEmails",()=>c,"removeStoredLocalUser",()=>d,"upsertStoredLocalUser",()=>x,"verifyStoredLocalUser",()=>m])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e7b81606._.js.map