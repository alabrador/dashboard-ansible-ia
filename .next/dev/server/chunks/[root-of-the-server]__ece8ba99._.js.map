{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///home/alabrador/dashboard-ansible-ia/src/lib/auth/local-user-store.ts"],"sourcesContent":["import { randomBytes, scrypt as scryptCallback, timingSafeEqual } from \"node:crypto\";\nimport { promises as fs } from \"node:fs\";\nimport { join } from \"node:path\";\nimport { promisify } from \"node:util\";\nimport { kv } from \"@vercel/kv\";\n\nconst scrypt = promisify(scryptCallback);\nconst STORE_DIR = join(process.cwd(), \"uploads\");\nconst STORE_PATH = join(STORE_DIR, \"local-users.json\");\nconst KV_USERS_KEY = \"dashboard:local-users\";\n\ntype StoredLocalUser = {\n  email: string;\n  username: string;\n  firstName: string;\n  lastName: string;\n  passwordHash: string;\n  salt: string;\n};\n\nexport type LocalUserProfile = {\n  email: string;\n  username: string;\n  firstName: string;\n  lastName: string;\n};\n\ntype StoredLocalUserFile = {\n  users: StoredLocalUser[];\n};\n\ntype LegacyStoredLocalUser = {\n  email?: string;\n  passwordHash?: string;\n  salt?: string;\n  username?: string;\n  firstName?: string;\n  lastName?: string;\n};\n\nfunction normalizeEmail(email: string): string {\n  return email.trim().toLowerCase();\n}\n\nfunction normalizeUsername(username: string): string {\n  return username.trim().toLowerCase();\n}\n\nfunction normalizeName(value: string): string {\n  return value.trim().replace(/\\s+/g, \" \");\n}\n\nfunction usernameFromEmail(email: string): string {\n  const localPart = normalizeEmail(email).split(\"@\")[0] ?? \"\";\n  return normalizeUsername(localPart || \"usuario\");\n}\n\nfunction normalizeStoredUser(item: LegacyStoredLocalUser): StoredLocalUser | null {\n  if (\n    typeof item?.email !== \"string\" ||\n    typeof item?.passwordHash !== \"string\" ||\n    typeof item?.salt !== \"string\"\n  ) {\n    return null;\n  }\n\n  const email = normalizeEmail(item.email);\n  if (!email) {\n    return null;\n  }\n\n  const username =\n    typeof item.username === \"string\" && item.username.trim()\n      ? normalizeUsername(item.username)\n      : usernameFromEmail(email);\n\n  const firstName = typeof item.firstName === \"string\" ? normalizeName(item.firstName) : \"\";\n  const lastName = typeof item.lastName === \"string\" ? normalizeName(item.lastName) : \"\";\n\n  return {\n    email,\n    username,\n    firstName,\n    lastName,\n    passwordHash: item.passwordHash,\n    salt: item.salt,\n  };\n}\n\nfunction sortUsers(users: StoredLocalUser[]): StoredLocalUser[] {\n  return [...users].sort((a, b) => a.username.localeCompare(b.username) || a.email.localeCompare(b.email));\n}\n\nfunction isVercelKvConfigured(): boolean {\n  return Boolean(process.env.KV_REST_API_URL && process.env.KV_REST_API_TOKEN);\n}\n\nasync function readStoreFromKv(): Promise<StoredLocalUserFile> {\n  const payload = await kv.get<StoredLocalUserFile>(KV_USERS_KEY);\n\n  if (!payload || !Array.isArray(payload.users)) {\n    return { users: [] };\n  }\n\n  return {\n    users: payload.users\n      .map((item) => normalizeStoredUser(item as LegacyStoredLocalUser))\n      .filter((item): item is StoredLocalUser => item !== null),\n  };\n}\n\nasync function writeStoreToKv(data: StoredLocalUserFile): Promise<void> {\n  await kv.set(KV_USERS_KEY, data);\n}\n\nasync function ensureStoreFile(): Promise<void> {\n  await fs.mkdir(STORE_DIR, { recursive: true });\n\n  try {\n    await fs.access(STORE_PATH);\n  } catch {\n    const initialData: StoredLocalUserFile = { users: [] };\n    await fs.writeFile(STORE_PATH, JSON.stringify(initialData, null, 2), \"utf8\");\n  }\n}\n\nasync function readStore(): Promise<StoredLocalUserFile> {\n  if (isVercelKvConfigured()) {\n    return readStoreFromKv();\n  }\n\n  await ensureStoreFile();\n  const raw = await fs.readFile(STORE_PATH, \"utf8\");\n\n  try {\n    const parsed = JSON.parse(raw) as StoredLocalUserFile;\n    if (!parsed || !Array.isArray(parsed.users)) {\n      return { users: [] };\n    }\n\n    return {\n      users: parsed.users\n        .map((item) => normalizeStoredUser(item as LegacyStoredLocalUser))\n        .filter((item): item is StoredLocalUser => item !== null),\n    };\n  } catch {\n    return { users: [] };\n  }\n}\n\nasync function writeStore(data: StoredLocalUserFile): Promise<void> {\n  if (isVercelKvConfigured()) {\n    await writeStoreToKv(data);\n    return;\n  }\n\n  await ensureStoreFile();\n  await fs.writeFile(STORE_PATH, JSON.stringify(data, null, 2), \"utf8\");\n}\n\nasync function hashPassword(password: string, salt: string): Promise<string> {\n  const derivedKey = (await scrypt(password, salt, 64)) as Buffer;\n  return derivedKey.toString(\"hex\");\n}\n\nexport async function listStoredLocalUserEmails(): Promise<string[]> {\n  const store = await readStore();\n  return sortUsers(store.users).map((user) => user.email);\n}\n\nexport async function listStoredLocalUsers(): Promise<LocalUserProfile[]> {\n  const store = await readStore();\n  return sortUsers(store.users).map((user) => ({\n    email: user.email,\n    username: user.username,\n    firstName: user.firstName,\n    lastName: user.lastName,\n  }));\n}\n\nexport async function upsertStoredLocalUser(profile: LocalUserProfile, password: string): Promise<void> {\n  const normalizedEmail = normalizeEmail(profile.email);\n  const normalizedUsername = normalizeUsername(profile.username);\n  const normalizedFirstName = normalizeName(profile.firstName);\n  const normalizedLastName = normalizeName(profile.lastName);\n\n  const salt = randomBytes(16).toString(\"hex\");\n  const passwordHash = await hashPassword(password, salt);\n\n  const store = await readStore();\n  const nextUsers = store.users.filter(\n    (user) => user.email !== normalizedEmail && user.username !== normalizedUsername,\n  );\n\n  nextUsers.push({\n    email: normalizedEmail,\n    username: normalizedUsername,\n    firstName: normalizedFirstName,\n    lastName: normalizedLastName,\n    passwordHash,\n    salt,\n  });\n\n  await writeStore({ users: sortUsers(nextUsers) });\n}\n\nexport async function removeStoredLocalUser(identifier: string): Promise<boolean> {\n  const normalizedIdentifier = identifier.trim().toLowerCase();\n  const store = await readStore();\n  const nextUsers = store.users.filter(\n    (user) => user.email !== normalizedIdentifier && user.username !== normalizedIdentifier,\n  );\n\n  if (nextUsers.length === store.users.length) {\n    return false;\n  }\n\n  await writeStore({ users: sortUsers(nextUsers) });\n  return true;\n}\n\nexport async function verifyStoredLocalUser(\n  identifier: string,\n  password: string,\n): Promise<LocalUserProfile | null> {\n  const normalizedIdentifier = identifier.trim().toLowerCase();\n  const store = await readStore();\n  const user = store.users.find(\n    (item) => item.email === normalizedIdentifier || item.username === normalizedIdentifier,\n  );\n\n  if (!user) {\n    return null;\n  }\n\n  const providedHash = await hashPassword(password, user.salt);\n  const expected = Buffer.from(user.passwordHash, \"hex\");\n  const actual = Buffer.from(providedHash, \"hex\");\n\n  if (expected.length !== actual.length) {\n    return null;\n  }\n\n  if (!timingSafeEqual(expected, actual)) {\n    return null;\n  }\n\n  return {\n    email: user.email,\n    username: user.username,\n    firstName: user.firstName,\n    lastName: user.lastName,\n  };\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":["file:///home/alabrador/dashboard-ansible-ia/src/app/api/auth/local-users/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport {\n  listStoredLocalUsers,\n  removeStoredLocalUser,\n  upsertStoredLocalUser,\n} from \"@/lib/auth/local-user-store\";\n\ntype LocalUserBody = {\n  username?: string;\n  firstName?: string;\n  lastName?: string;\n  email?: string;\n  password?: string;\n  identifier?: string;\n};\n\nfunction normalizeEmail(email: string): string {\n  return email.trim().toLowerCase();\n}\n\nfunction isValidEmail(email: string): boolean {\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n}\n\nfunction normalizeUsername(username: string): string {\n  return username.trim().toLowerCase();\n}\n\nfunction normalizeName(value: string): string {\n  return value.trim().replace(/\\s+/g, \" \");\n}\n\nfunction isValidUsername(username: string): boolean {\n  return /^[a-z0-9._-]{3,32}$/.test(username);\n}\n\nexport async function GET() {\n  try {\n    const users = await listStoredLocalUsers();\n    return NextResponse.json({ users });\n  } catch {\n    return NextResponse.json(\n      { error: \"No se pudo cargar la lista de usuarios locales.\" },\n      { status: 500 },\n    );\n  }\n}\n\nexport async function POST(request: Request) {\n  try {\n    const body = (await request.json()) as LocalUserBody;\n    const username = normalizeUsername(body.username ?? \"\");\n    const firstName = normalizeName(body.firstName ?? \"\");\n    const lastName = normalizeName(body.lastName ?? \"\");\n    const email = normalizeEmail(body.email ?? \"\");\n    const password = body.password?.trim() ?? \"\";\n\n    if (!username || !firstName || !lastName || !email || !password) {\n      return NextResponse.json(\n        { error: \"Debes enviar usuario, nombre, apellido, correo y contraseña.\" },\n        { status: 400 },\n      );\n    }\n\n    if (!isValidUsername(username)) {\n      return NextResponse.json(\n        { error: \"El usuario debe tener entre 3 y 32 caracteres (a-z, 0-9, punto, guión o guión bajo).\" },\n        { status: 400 },\n      );\n    }\n\n    if (!isValidEmail(email)) {\n      return NextResponse.json(\n        { error: \"El correo no tiene formato válido.\" },\n        { status: 400 },\n      );\n    }\n\n    if (password.length < 8) {\n      return NextResponse.json(\n        { error: \"La contraseña debe tener al menos 8 caracteres.\" },\n        { status: 400 },\n      );\n    }\n\n    await upsertStoredLocalUser({ username, firstName, lastName, email }, password);\n    return NextResponse.json({ ok: true });\n  } catch {\n    return NextResponse.json(\n      { error: \"No se pudo guardar el usuario local.\" },\n      { status: 500 },\n    );\n  }\n}\n\nexport async function DELETE(request: Request) {\n  try {\n    const body = (await request.json()) as LocalUserBody;\n    const identifier = normalizeUsername(body.identifier ?? body.username ?? body.email ?? \"\");\n\n    if (!identifier) {\n      return NextResponse.json(\n        { error: \"Debes indicar el usuario o correo a eliminar.\" },\n        { status: 400 },\n      );\n    }\n\n    const removed = await removeStoredLocalUser(identifier);\n    if (!removed) {\n      return NextResponse.json(\n        { error: \"Usuario no encontrado.\" },\n        { status: 404 },\n      );\n    }\n\n    return NextResponse.json({ ok: true });\n  } catch {\n    return NextResponse.json(\n      { error: \"No se pudo eliminar el usuario local.\" },\n      { status: 500 },\n    );\n  }\n}"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAeA,SAAS,eAAe,KAAa;IACnC,OAAO,MAAM,IAAI,GAAG,WAAW;AACjC;AAEA,SAAS,aAAa,KAAa;IACjC,OAAO,6BAA6B,IAAI,CAAC;AAC3C;AAEA,SAAS,kBAAkB,QAAgB;IACzC,OAAO,SAAS,IAAI,GAAG,WAAW;AACpC;AAEA,SAAS,cAAc,KAAa;IAClC,OAAO,MAAM,IAAI,GAAG,OAAO,CAAC,QAAQ;AACtC;AAEA,SAAS,gBAAgB,QAAgB;IACvC,OAAO,sBAAsB,IAAI,CAAC;AACpC;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,QAAQ,MAAM,IAAA,sKAAoB;QACxC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAM;IACnC,EAAE,OAAM;QACN,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAkD,GAC3D;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAQ,MAAM,QAAQ,IAAI;QAChC,MAAM,WAAW,kBAAkB,KAAK,QAAQ,IAAI;QACpD,MAAM,YAAY,cAAc,KAAK,SAAS,IAAI;QAClD,MAAM,WAAW,cAAc,KAAK,QAAQ,IAAI;QAChD,MAAM,QAAQ,eAAe,KAAK,KAAK,IAAI;QAC3C,MAAM,WAAW,KAAK,QAAQ,EAAE,UAAU;QAE1C,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,YAAY,CAAC,SAAS,CAAC,UAAU;YAC/D,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA+D,GACxE;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,CAAC,gBAAgB,WAAW;YAC9B,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAuF,GAChG;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,CAAC,aAAa,QAAQ;YACxB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAqC,GAC9C;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,SAAS,MAAM,GAAG,GAAG;YACvB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAkD,GAC3D;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,IAAA,uKAAqB,EAAC;YAAE;YAAU;YAAW;YAAU;QAAM,GAAG;QACtE,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;QAAK;IACtC,EAAE,OAAM;QACN,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAuC,GAChD;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,OAAO,OAAgB;IAC3C,IAAI;QACF,MAAM,OAAQ,MAAM,QAAQ,IAAI;QAChC,MAAM,aAAa,kBAAkB,KAAK,UAAU,IAAI,KAAK,QAAQ,IAAI,KAAK,KAAK,IAAI;QAEvF,IAAI,CAAC,YAAY;YACf,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAgD,GACzD;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,UAAU,MAAM,IAAA,uKAAqB,EAAC;QAC5C,IAAI,CAAC,SAAS;YACZ,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAyB,GAClC;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;QAAK;IACtC,EAAE,OAAM;QACN,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwC,GACjD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}