{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///home/alabrador/dashboard-ansible-ia/src/components/robot-3d-scene.tsx"],"sourcesContent":["\"use client\";\n\nimport { Canvas, useFrame } from \"@react-three/fiber\";\nimport { CameraShake, OrbitControls, Stage, useAnimations, useGLTF } from \"@react-three/drei\";\nimport { Suspense, useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\n\ntype Robot3DSceneProps = {\n  lookX: number;\n  lookY: number;\n  theme: \"dark\" | \"light\";\n  isSmiling: boolean;\n};\n\ntype RobotModelProps = {\n  lookX: number;\n  lookY: number;\n  isSmiling: boolean;\n};\n\nfunction RobotModel({ lookX, lookY, isSmiling }: RobotModelProps) {\n  const robotRef = useRef<THREE.Group>(null);\n  const { scene, animations } = useGLTF(\"/models/robot-draco.glb\");\n  const { actions } = useAnimations(animations, scene);\n\n  useEffect(() => {\n    const idleAction = actions.Idle;\n    if (idleAction) {\n      idleAction.reset().fadeIn(0.25).play();\n    }\n\n    scene.traverse((obj) => {\n      if ((obj as THREE.Mesh).isMesh) {\n        obj.castShadow = true;\n        obj.receiveShadow = true;\n      }\n    });\n\n    return () => {\n      if (idleAction) {\n        idleAction.fadeOut(0.2);\n      }\n    };\n  }, [actions, scene]);\n\n  useFrame((_, delta) => {\n    if (robotRef.current) {\n      const targetY = lookX * 0.22;\n      const targetX = lookY * -0.14;\n      const targetScale = isSmiling ? 1.045 : 1;\n\n      robotRef.current.rotation.y = THREE.MathUtils.lerp(robotRef.current.rotation.y, targetY, delta * 4.5);\n      robotRef.current.rotation.x = THREE.MathUtils.lerp(robotRef.current.rotation.x, targetX, delta * 4.5);\n      robotRef.current.scale.x = THREE.MathUtils.lerp(robotRef.current.scale.x, targetScale, delta * 8);\n      robotRef.current.scale.y = THREE.MathUtils.lerp(robotRef.current.scale.y, targetScale, delta * 8);\n      robotRef.current.scale.z = THREE.MathUtils.lerp(robotRef.current.scale.z, targetScale, delta * 8);\n    }\n  });\n\n  return <primitive ref={robotRef} object={scene} position={[0, -0.12, 0]} scale={0.8} />;\n}\n\nuseGLTF.preload(\"/models/robot-draco.glb\");\n\nexport function Robot3DScene({ lookX, lookY, theme, isSmiling }: Robot3DSceneProps) {\n  return (\n    <Canvas\n      dpr={[2, 3]}\n      shadows\n      camera={{ position: [0, 0.2, 3.8], fov: 45 }}\n      gl={{ antialias: true, alpha: true, powerPreference: \"high-performance\" }}\n      className=\"h-full w-full\"\n    >\n      <Suspense fallback={null}>\n        <Stage\n          adjustCamera={1.15}\n          intensity={theme === \"dark\" ? 1.1 : 0.95}\n          environment={theme === \"dark\" ? \"city\" : \"studio\"}\n          contactShadow={false}\n        >\n          <RobotModel lookX={lookX} lookY={lookY} isSmiling={isSmiling} />\n        </Stage>\n      </Suspense>\n\n      <OrbitControls\n        makeDefault\n        enablePan={false}\n        enableZoom={false}\n        minPolarAngle={Math.PI / 2.2}\n        maxPolarAngle={Math.PI / 1.8}\n        minAzimuthAngle={-0.65}\n        maxAzimuthAngle={0.65}\n      />\n\n      <CameraShake\n        maxYaw={0.1}\n        maxPitch={0.05}\n        maxRoll={0.05}\n        yawFrequency={0.05}\n        pitchFrequency={0.2}\n        rollFrequency={0.2}\n        intensity={0.55}\n        decayRate={0.65}\n      />\n    </Canvas>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["file:///home/alabrador/dashboard-ansible-ia/src/components/floating-robot-bot.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { Robot3DScene } from \"@/components/robot-3d-scene\";\n\ntype NewsItem = {\n  title: string;\n  link: string;\n  source?: string;\n  pubDate?: string;\n};\n\nexport function FloatingRobotBot() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isSmiling, setIsSmiling] = useState(false);\n  const [headline, setHeadline] = useState<NewsItem | null>(null);\n  const [isLoadingNews, setIsLoadingNews] = useState(false);\n  const [newsError, setNewsError] = useState(\"\");\n  const [theme, setTheme] = useState<\"dark\" | \"light\">(() => {\n    if (typeof window === \"undefined\") {\n      return \"dark\";\n    }\n\n    const savedTheme = window.localStorage.getItem(\"dashboard-theme\");\n    return savedTheme === \"light\" ? \"light\" : \"dark\";\n  });\n  const smileTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n\n    const onStorage = () => {\n      const savedTheme = window.localStorage.getItem(\"dashboard-theme\");\n      if (savedTheme === \"dark\" || savedTheme === \"light\") {\n        setTheme(savedTheme);\n      }\n    };\n\n    window.addEventListener(\"storage\", onStorage);\n    const intervalId = window.setInterval(onStorage, 1000);\n\n    return () => {\n      window.removeEventListener(\"storage\", onStorage);\n      window.clearInterval(intervalId);\n    };\n  }, []);\n\n  const bubbleClass = theme === \"dark\" ? \"bg-zinc-900/95 text-zinc-100\" : \"bg-white/95 text-zinc-900\";\n\n  const loadNews = useCallback(async () => {\n    setIsLoadingNews(true);\n    setNewsError(\"\");\n\n    try {\n      const response = await fetch(\"/api/news\", { cache: \"no-store\" });\n      const payload = (await response.json()) as { items?: NewsItem[]; error?: string };\n\n      if (!response.ok || !payload.items?.length) {\n        setNewsError(payload.error ?? \"No pude traer noticias ahora.\");\n        setHeadline(null);\n        return;\n      }\n\n      const randomIndex = Math.floor(Math.random() * payload.items.length);\n      setHeadline(payload.items[randomIndex] ?? null);\n    } catch {\n      setNewsError(\"No pude conectar con el servicio de noticias.\");\n      setHeadline(null);\n    } finally {\n      setIsLoadingNews(false);\n    }\n  }, []);\n\n  const handleRobotClick = () => {\n    setIsOpen((current) => !current);\n    setIsSmiling(true);\n\n    if (smileTimeoutRef.current) {\n      clearTimeout(smileTimeoutRef.current);\n    }\n\n    smileTimeoutRef.current = setTimeout(() => {\n      setIsSmiling(false);\n      smileTimeoutRef.current = null;\n    }, 1400);\n  };\n\n  useEffect(() => {\n    if (!isOpen) {\n      return;\n    }\n\n    let isMounted = true;\n    let cycleTimeout: ReturnType<typeof setTimeout> | null = null;\n\n    const runCycle = async () => {\n      if (!isMounted) {\n        return;\n      }\n\n      await loadNews();\n\n      if (!isMounted) {\n        return;\n      }\n\n      cycleTimeout = setTimeout(() => {\n        void runCycle();\n      }, 45000);\n    };\n\n    void runCycle();\n\n    return () => {\n      isMounted = false;\n      if (cycleTimeout) {\n        clearTimeout(cycleTimeout);\n      }\n    };\n  }, [isOpen, loadNews]);\n\n  useEffect(() => {\n    return () => {\n      if (smileTimeoutRef.current) {\n        clearTimeout(smileTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  return (\n    <div className=\"pointer-events-none fixed bottom-6 right-4 z-50 flex flex-col items-end sm:bottom-8 sm:right-5\">\n      {isOpen ? (\n        <div className={`pointer-events-auto mb-3 w-[170px] rounded-xl px-2.5 py-2 text-[11px] shadow-[0_16px_32px_-18px_rgba(14,165,233,0.7)] sm:mb-4 sm:w-[190px] ${bubbleClass}`}>\n          <p className=\"font-semibold\">Asistente</p>\n          <p className=\"mt-0.5 opacity-90\">Hola pana ðŸ‘‹</p>\n\n          <div className=\"mt-2\">\n            {isLoadingNews ? <p className=\"opacity-80\">Buscando titulares...</p> : null}\n            {!isLoadingNews && newsError ? <p className=\"opacity-80\">{newsError}</p> : null}\n            {!isLoadingNews && !newsError && headline ? (\n              <a\n                href={headline.link}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                className=\"block rounded-lg bg-black/5 px-2 py-2 leading-snug transition hover:bg-black/10 dark:bg-white/5 dark:hover:bg-white/10\"\n              >\n                {headline.title}\n              </a>\n            ) : null}\n          </div>\n        </div>\n      ) : null}\n\n      <button\n        type=\"button\"\n        onClick={handleRobotClick}\n        aria-label={isOpen ? \"Ocultar noticias\" : \"Mostrar noticias\"}\n        className=\"pointer-events-auto relative h-36 w-36 overflow-visible rounded-2xl bg-transparent transition-transform duration-150 [transform:translateZ(0)] sm:h-40 sm:w-40\"\n      >\n        <span className=\"absolute -inset-3 rounded-full bg-cyan-400/20 blur-xl\" />\n        <span className=\"absolute -inset-3 overflow-visible rounded-2xl\">\n          <Robot3DScene lookX={0} lookY={0} theme={theme} isSmiling={isSmiling} />\n        </span>\n      </button>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}