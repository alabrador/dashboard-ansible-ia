module.exports=[93695,(e,r,t)=>{r.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70406,(e,r,t)=>{r.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},18622,(e,r,t)=>{r.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},60187,e=>{"use strict";var r=e.i(91180);function t(e,t){e.cookies.set({name:(0,r.getSessionCookieName)(),value:t,httpOnly:!0,secure:!0,sameSite:"lax",path:"/",maxAge:(0,r.getSessionMaxAge)()})}function s(e){e.cookies.set({name:(0,r.getSessionCookieName)(),value:"",httpOnly:!0,secure:!0,sameSite:"lax",path:"/",maxAge:0})}e.s(["clearSessionCookie",()=>s,"setSessionCookie",()=>t])},12057,(e,r,t)=>{r.exports=e.x("node:util",()=>require("node:util"))},76661,e=>{"use strict";var r=e.i(66680),t=e.i(2157),s=e.i(50227),a=e.i(12057),i=e.i(91501);let n=(0,a.promisify)(r.scrypt),o=(0,s.join)(process.cwd(),"uploads"),l=(0,s.join)(o,"local-users.json"),u="dashboard:local-users";function p(){return!!(process.env.KV_REST_API_URL&&process.env.KV_REST_API_TOKEN)}async function c(){let e=await i.kv.get(u);return e&&Array.isArray(e.users)?{users:e.users.filter(e=>"string"==typeof e?.email&&"string"==typeof e?.passwordHash&&"string"==typeof e?.salt)}:{users:[]}}async function x(e){await i.kv.set(u,e)}async function f(){await t.promises.mkdir(o,{recursive:!0});try{await t.promises.access(l)}catch{await t.promises.writeFile(l,JSON.stringify({users:[]},null,2),"utf8")}}async function d(){if(p())return c();await f();let e=await t.promises.readFile(l,"utf8");try{let r=JSON.parse(e);if(!r||!Array.isArray(r.users))return{users:[]};return{users:r.users.filter(e=>"string"==typeof e?.email&&"string"==typeof e?.passwordHash&&"string"==typeof e?.salt)}}catch{return{users:[]}}}async function m(e){p()?await x(e):(await f(),await t.promises.writeFile(l,JSON.stringify(e,null,2),"utf8"))}async function y(e,r){return(await n(e,r,64)).toString("hex")}async function w(){return(await d()).users.map(e=>e.email).sort((e,r)=>e.localeCompare(r))}async function g(e,t){let s=e.trim().toLowerCase(),a=(0,r.randomBytes)(16).toString("hex"),i=await y(t,a),n=(await d()).users.filter(e=>e.email!==s);n.push({email:s,passwordHash:i,salt:a}),await m({users:n})}async function h(e){let r=e.trim().toLowerCase(),t=await d(),s=t.users.filter(e=>e.email!==r);return s.length!==t.users.length&&(await m({users:s}),!0)}async function v(e,t){let s=e.trim().toLowerCase(),a=(await d()).users.find(e=>e.email===s);if(!a)return!1;let i=await y(t,a.salt),n=Buffer.from(a.passwordHash,"hex"),o=Buffer.from(i,"hex");return n.length===o.length&&(0,r.timingSafeEqual)(n,o)}e.s(["listStoredLocalUserEmails",()=>w,"removeStoredLocalUser",()=>h,"upsertStoredLocalUser",()=>g,"verifyStoredLocalUser",()=>v])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__bb54ceed._.js.map